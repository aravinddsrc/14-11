@model DSRCManagementSystem.Models.StudentModel
@{
    ViewBag.Title = "Approved Timesheet Management";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}
@section AddToHead
{
    <link href="../../Content/Template/js/select2/select2-bootstrap.css" rel="stylesheet"
        type="text/css" />
    <link href="../../Content/Template/js/select2/select2.css" rel="stylesheet" type="text/css" />
    <link href="../../Content/Template/css/font-icons/font-awesome/css/font-awesome.min.css"
        rel="stylesheet" type="text/css" />
    <link href="../../Content/Plugins/bootstrap-datetimepicker/css/bootstrap-datepicker.css"
        rel="stylesheet" type="text/css" />
    <script src="../../Content/Plugins/bootstrap-datetimepicker/js/bootstrap-datepicker.js"
        type="text/javascript"></script>
    <script src="../../Content/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="../../Content/bootstrap/bootbox.min.js" type="text/javascript"></script>
     <script src="../../Content/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>

      <style>
     
        
             .square1
        {
            width: 10px;
            height: 10px;
            background: red;
        }
          .square2
        {
            width: 10px;
            height: 10px;
            background: orange;
        }
          .square3
        {
            width: 10px;
            height: 10px;
            background: green;
        }

         
       .dropdown-menu {
    background-color: white;
          }  
   
        
    </style>





}
@{
    int SNO = 1;
    
}
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>AddUser</title>
    <style type="text/css">
        textarea
        {
            resize: none;
        }
    </style>
</head>
<body>
     <ol class="breadcrumb bc-3">
    <li>TimeSheet Management</li>
        <li class="active"><strong>Approve Timesheet</strong></li>
    </ol>
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-default panel-shadow" data-collapsed="0">
                <!-- panel head -->
                @*<div class="panel-heading">
                 Approve Timesheet
                    <div class="panel-title" color="White">
                       </div>

                </div>*@
                 <div class="panel-heading">
                <div class="panel-title" color="White">
                   Approve Timesheet</div>
            </div>
                <br /><br /><br /> <br />

 <div class=" col-md-6">   
                            
                            <div  class="col-md-3">
                            <div class="col-md-1 square1">
                            
                            </div>
                            <div class="col-md-3 ">
                            
                          Holiday
                        
                            </div>
                            </div>

                             <div  class="col-md-3 ">
                            <div class="col-md-1 square2">
                            
                            </div>
                            <div class="col-md-2 ">
                            
                          Leave
                        
                            </div>
                            </div>

                             <div  class="col-md-3 ">
                            <div class="col-md-1 square3">
                            
                            </div>
                            <div class="col-md-3 ">
                             OD
                            </div>
                            </div>


                          


                </div>
                <br />
                <br />
                
                <div>

                 </div>
                <!-- panel body -->
                <div class="panel-body"> 
                 <div  style="float: right">
                      @Html.Label("Total hours worked in this week", new { @class = "control-label" })
                      @Html.TextBoxFor(x => x.Weekhours, new { @id = "Weekhours", @name = "Weekhours", @class = "form-control", @autocomplete = "off",@disabled="disabled" })
               </div>   
                    <br /> <br /> <br /> <br /> <br />
                    
 



                    @using (Html.BeginForm("TimeSheetManagement", "TSR", FormMethod.Post))
                    { 
                        <table class="table table-bordered datatable" id="tblMeeting">
                            <thead>
                                <tr>
                                   @* <th style="text-align:center;">
                                        S.No
                                    </th>*@
                                     <th style="text-align:left;width:2000px;">
                                   @Html.DisplayName("User Name")
                                    </th>
                                      <th style="text-align:left;width:3500px;">
                                   @Html.DisplayName("Task Name")
                                    </th>  
                                     <th style="text-align:center;width:1500px; ">
                                   @Html.DisplayName("Mon")
                                   <br />
                                   
                                   @if (@Model.StudentList[0].MondayDate.HasValue)
                                   {
                                    @Model.StudentList[0].MondayDate.Value.ToString("dd/MM/yyyy")                            
                                   }
                                   else
                                   {
                                       
                                   }
                                    </th>                    
                                    <th style="text-align:center;width:1500px; ">
                                    @Html.DisplayName("Tue")
                                    <br />
                                    @if (@Model.StudentList[1].TuesdayDate.HasValue)
                                    { 
                                      @Model.StudentList[1].TuesdayDate.Value.ToString("dd/MM/yyyy")
                                    }
                                    else
                                    {
                                    }
                                     </th>
                                    <th style="text-align:center;width:1500px; ">
                                    @Html.DisplayName("Wed")
                                    <br />
                                     @if (@Model.StudentList[2].WednesDayDate.HasValue)
                                     { 
                                      @Model.StudentList[2].WednesDayDate.Value.ToString("dd/MM/yyyy")
                                     }
                                     else
                                     {
                                     }
                                    </th>
                                    <th style="text-align:center;width:1500px; ">
                                     @Html.DisplayName("Thu")
                                     <br />
                                    @if (@Model.StudentList[3].ThursDayDate.HasValue)
                                    { 
                                      @Model.StudentList[3].ThursDayDate.Value.ToString("dd/MM/yyyy")
                                    }
                                    else
                                    {
                                    }
                                    </th>
                                    <th style="text-align:center;width:1500px; ">
                                     @Html.DisplayName("Fri")
                                     <br />
                                     @if (@Model.StudentList[4].FridayDate.HasValue)
                                     { 
                                      @Model.StudentList[4].FridayDate.Value.ToString("dd/MM/yyyy")
                                     }
                                     else
                                     {
                                     }
                                    </th>
                                      <th style="text-align:center;width:1200px;">
                                     @Html.DisplayName("Sat")
                                     <br />
                                         @if (@Model.StudentList[5].SaturDayDate.HasValue)
                                         { 
                                        @Model.StudentList[5].SaturDayDate.Value.ToString("dd/MM/yyyy")
                                         }
                                         else
                                         {
                                         }
                                    </th>
                                    <th style="text-align:center;width:1200px;">
                                      @Html.DisplayName("Sun")
                                    <br />
                                       @if (@Model.StudentList[6].Sundaydate.HasValue)
                                       { 
                                          @Model.StudentList[6].Sundaydate.Value.ToString("dd/MM/yyyy")
                                       }
                                       else
                                       {
                                       }
                                    </th>
                                     <th style="text-align:left;width:1200px;">
                                   @Html.DisplayName("Total")
                                    </th>
                                     <th style="text-align:left;">
                                   
                                    </th>
                                      <th style="text-align:left;">
                                   
                                    </th>
                                     <th style="text-align:left;">
                                   
                                    </th>
                                </tr>
                            </thead>
                            @{                 
                                   int i;
                                   string total;
                                   for (i = 0; i <@Model.TaskName.Count(); i++)
                                   {                                                                             
                                <tr>
                                   @* <td style="text-align: center;">
                                        @(SNO++)  
                                              
                                                 
                                    </td>*@

                                     <td style="width:3500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.DisplayFor( x => x.TaskName[i].UserName)
                                        @Html.TextBoxFor(x => x.TaskName[i].UserName, new { @id = "Textbox12"+i, @class = "form-control", @style = "height20px;display:none;", @maxlength = 50, @disabled = "disabled" })   
                                         @Html.TextBoxFor(x => x.TaskName[i].UserId, new { @id = "Textbox13"+i, @class = "form-control", @style = "height:20px;display:none;", @maxlength = 50})                                                               
                                       
                                         </td>



                                       <td style="width:4500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.DisplayFor( x => x.TaskName[i].Task)
                                        @Html.TextBoxFor(x => x.TaskName[i].Task, new { @id = "Textbox10"+i, @class = "form-control", @style = "height20px;display:none;", @maxlength = 50 })   
                                        @Html.TextBoxFor(x => x.TaskName[i].id, new { @id = "Textbox11"+i, @class = "form-control", @style = "height:20px;display:none;", @maxlength = 50})   
                                        @Html.TextBoxFor(x => x.StudentList[0].MondayDate, new { @id = "Textbox15"+i, @class = "form-control", @style = "height:20px;display:none;", @maxlength = 50, @disabled = "disabled" }) 
                                       @Html.TextBoxFor(x => x.StudentList[1].TuesdayDate, new { @id = "Textbox16"+i, @class = "form-control", @style = "height:20px;display:none;", @maxlength = 50, @disabled = "disabled" })
                                       @Html.TextBoxFor(x => x.StudentList[2].WednesDayDate, new { @id = "Textbox17"+i, @class = "form-control", @style = "height:20px;display:none;", @maxlength = 50, @disabled = "disabled" })  
                                       @Html.TextBoxFor(x => x.StudentList[3].ThursDayDate, new { @id = "Textbox18"+i, @class = "form-control", @style = "height:20px;display:none;", @maxlength = 50, @disabled = "disabled" })  
                                      @Html.TextBoxFor(x => x.StudentList[4].FridayDate, new { @id = "Textbox19"+i, @class = "form-control", @style = "height:20px;display:none;", @maxlength = 50, @disabled = "disabled" })                                                              
                                         </td>
                                     
                                    
                                       @if (@Model.StudentList[0].mondayholiday == true)
                                       {
                                       <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                         @Html.TextBoxFor(x => x.StudentList[0].Monday, new { @id = "Textbox1" + i, @class = "form-control", @style = "height:35px;border-color:red", @maxlength = 1, @disabled = "disabled", @onchange = "Test1(" + i + "," + Model.TaskName.Count() + ")" })
                                       </td>
                                       }
                                       else if (@Model.StudentList[0].MondayLeave == true)
                                       {
                                         <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                         @Html.TextBoxFor(x => x.StudentList[0].MondayLeave1, new { @id = "Textbox1" + i, @class = "form-control", @style = "height:35px;border-color:orange", @maxlength = 1, @disabled = "disabled", @onchange = "Test1(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                       }
                                       else if (@Model.StudentList[0].MondayOut == true)
                                       {
                                         <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                         @Html.TextBoxFor(x => x.StudentList[0].MondayOutValue, new { @id = "Textbox1" + i, @class = "form-control", @style = "height:35px;border-color:green", @maxlength = 1, @onchange = "Test1(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td> 
                                       }
                                       else
                                       {
                                           if (@Model.TaskName[i].Monday != null)
                                           {
                                         <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                         @Html.TextBoxFor(x => x.TaskName[i].Monday, new { @id = "Textbox1" + i, @class = "form-control", @style = "height:35px", @maxlength = 1, @onchange = "Test1(" + i + "," + Model.TaskName.Count() + ")" })
                                         </td> 
                                           }
                                           else
                                           {
                                          <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                         @Html.TextBoxFor(x => x.TaskName[i].Monday, new { @id = "Textbox1" + i, @class = "form-control", @style = "height:35px", @maxlength = 1, @onchange = "Test1(" + i + "," + Model.TaskName.Count() + ")" })
                                         </td>
                                           }
                                       }
                                       @if (@Model.StudentList[1].Tuesdayholiday == true)
                                       {
                                      <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.TextBoxFor(x => x.StudentList[1].Tuesday, new { @id = "Textbox2" + i, @class = "form-control", @style = "height:35px;border-color:red", @maxlength = 1, @disabled = "disabled", @onchange = "Test2(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                       }
                                       else if (@Model.StudentList[1].TuesDayLeave == true)
                                       {
                                         <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.TextBoxFor(x => x.StudentList[1].TuesDayLeave1, new { @id = "Textbox2" + i, @class = "form-control", @style = "height:35px;border-color:orange", @maxlength = 1, @disabled = "disabled", @onchange = "Test2(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                       }
                                       else if (@Model.StudentList[1].TuesdayOut == true)
                                       {
                                         <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.TextBoxFor(x => x.StudentList[1].TuesdayOutValue, new { @id = "Textbox2" + i, @class = "form-control", @style = "height:35px;border-color:green", @maxlength = 1, @onchange = "Test2(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                       }
                                       else
                                       {
                                           if (@Model.TaskName[i].Tuesday != null)
                                           {
                                         <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.TextBoxFor(x => x.TaskName[i].Tuesday, new { @id = "Textbox2" + i, @class = "form-control", @style = "height:35px", @maxlength = 1, @onchange = "Test2(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                           }
                                           else
                                           {
                                         <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.TextBoxFor(x => x.TaskName[i].Tuesday, new { @id = "Textbox2" + i, @class = "form-control", @style = "height:35px", @maxlength = 1, @onchange = "Test2(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                           }
                                       }
                                       @if (@Model.StudentList[2].Wednesdayholiday == true)
                                       {
                                         <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.TextBoxFor(x => x.StudentList[2].Wednesday, new { @id = "Textbox3" + i, @class = "form-control", @style = "height:35px;border-color:red", @maxlength = 1, @disabled = "disabled", @onchange = "Test3(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                       }
                                       else if (@Model.StudentList[2].WednesdayLeave == true)
                                       {
                                         <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.TextBoxFor(x => x.StudentList[2].WednesdayLeave1, new { @id = "Textbox3" + i, @class = "form-control", @style = "height:35px;border-color:orange", @maxlength = 1, @disabled = "disabled", @onchange = "Test3(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                       }
                                       else if (@Model.StudentList[2].WednesdayOut == true)
                                       {
                                        <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.TextBoxFor(x => x.StudentList[2].WednesdayOutValue, new { @id = "Textbox3" + i, @class = "form-control", @style = "height:35px;border-color:green", @maxlength = 1, @onchange = "Test3(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                       }

                                       else
                                       {
                                           if (@Model.TaskName[i].Wednesday != null)
                                           {
                                        <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.TextBoxFor(x => x.TaskName[i].Wednesday, new { @id = "Textbox3" + i, @class = "form-control", @style = "height:35px", @maxlength = 1, @onchange = "Test3(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                           }
                                           else
                                           {
                                            <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.TextBoxFor(x => x.TaskName[i].Wednesday, new { @id = "Textbox3" + i, @class = "form-control", @style = "height:35px", @maxlength = 1, @onchange = "Test3(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                           }
                                       }
                                       @if (@Model.StudentList[3].Thursdayholiday == true)
                                       {
                                      <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                       @Html.TextBoxFor(x => x.StudentList[3].Thursday, new { @id = "Textbox4" + i, @class = "form-control", @style = "height35px;border-color:red", @maxlength = 1, @disabled = "disabled", @onchange = "Test4(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                       }
                                       else if (@Model.StudentList[3].ThursdayLeave == true)
                                       {
                                           <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                       @Html.TextBoxFor(x => x.StudentList[3].ThursdayLeave1, new { @id = "Textbox4" + i, @class = "form-control", @style = "height35px;border-color:orange", @maxlength = 1, @disabled = "disabled", @onchange = "Test4(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td> 
                                       }
                                       else if (@Model.StudentList[3].ThursadyOut == true)
                                       {
                                         <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.TextBoxFor(x => x.StudentList[3].ThursdayOutValue, new { @id = "Textbox4" + i, @class = "form-control", @style = "height:35px;border-color:green", @maxlength = 1, @onchange = "Test4(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                       }
                                       else
                                       {
                                           if (@Model.TaskName[i].Thursday != null)
                                           {
                                        <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                       @Html.TextBoxFor(x => x.TaskName[i].Thursday, new { @id = "Textbox4" + i, @class = "form-control", @style = "height:35px", @maxlength = 1, @onchange = "Test4(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                           }
                                           else
                                           {
                                          <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                         @Html.TextBoxFor(x => x.TaskName[i].Thursday, new { @id = "Textbox4" + i, @class = "form-control", @style = "height:35px", @maxlength = 1, @onchange = "Test4(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td> 
                                           }
                                       }
                                       @if (@Model.StudentList[4].Fridayholiday == true)
                                       {
                                       <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                       @Html.TextBoxFor(x => x.StudentList[4].Friday, new { @id = "Textbox5" + i, @class = "form-control", @style = "height:35px;border-color:red", @maxlength = 1, @disabled = "disabled", @onchange = "Test5(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>  
                                       }
                                       else if (@Model.StudentList[4].FridayLeave == true)
                                       {
                                          <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                       @Html.TextBoxFor(x => x.StudentList[4].FridayLeave1, new { @id = "Textbox5" + i, @class = "form-control", @style = "height:35px;border-color:orange", @maxlength = 1, @disabled = "disabled", @onchange = "Test5(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>   
                                       }
                                       else if (@Model.StudentList[4].FridayOut == true)
                                       {
                                          <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                         @Html.TextBoxFor(x => x.StudentList[4].FridayOutValue, new { @id = "Textbox5" + i, @class = "form-control", @style = "height:35px;border-color:green", @maxlength = 1, @onchange = "Test5(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>   
                                       }
                                       else
                                       {
                                           if (@Model.TaskName[i].Friday != null)
                                           {
                                       <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                       @Html.TextBoxFor(x => x.TaskName[i].Friday, new { @id = "Textbox5" + i, @class = "form-control", @style = "height:35px", @maxlength = 50, @onchange = "Test5(" + i + "," + Model.TaskName.Count() + ")"})
                                        </td>  
                                           }
                                           else
                                           {
                                       <td style="width:1500px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                       @Html.TextBoxFor(x => x.TaskName[i].Friday, new { @id = "Textbox5" + i, @class = "form-control", @style = "height:35px", @maxlength = 50, @onchange = "Test5(" + i + "," + Model.TaskName.Count() + ")"})
                                        </td>  
                                           }
                                       }
                                            
                                       
                                         
                                          <td style="width:1200px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                        @Html.TextBoxFor(x => x.StudentList[5].Saturday, new { @id = "Textbox6" + i, @class = "form-control", @style = "height:35px;border-color:red", @maxlength = 50, @disabled = "disabled", @onchange = "Test6(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>  
                                   
                                         <td style="width:1200px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                       @Html.TextBoxFor(x => x.StudentList[5].Sunday, new { @id = "Textbox7" + i, @class = "form-control", @style = "height:35px;border-color:red", @maxlength = 50, @disabled = "disabled", @onchange = "Test7(" + i + "," + Model.TaskName.Count() + ")" })
                                        </td>
                                        @if (@Model.TaskName[i].Total != null)
                                        {   
                                         <td style="width:1200px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                       @Html.TextBoxFor(x => x.TaskName[i].Total, new { @id = "Textbox8" + i, @class = "form-control", @style = "height:35px", @maxlength = 50, @onchange = "Test8(" + i + "," + Model.TaskName.Count() + ")", @disabled = "disabled" })
                                        </td>  
                                        }
                                        else if(@Model.StudentList[6].Total != null && @Model.TaskName[i].Total == null)
                                        {
                                             <td style="width:1200px;word-wrap:breakword;word-break:break-all;text-align:center;" >
                                       @Html.TextBoxFor(x => x.StudentList[6].Total, new { @id = "Textbox8" + i, @class = "form-control", @style = "height:35px", @maxlength = 999, @onchange = "Test8(" + i + "," + Model.TaskName.Count() + ")", @disabled = "disabled" })
                                        </td>
                                            
                                        }
                                        else
                                        {
                                        <td style="width:1200px;word-wrap:breakword;word-break:break-all;text-align:left;" >
                                       @Html.TextBoxFor(x => x.TaskName[i].Total, new { @id = "Textbox8" + i, @class = "form-control", @style = "height:35px", @maxlength = 50, @onchange = "Test8(" + i + "," + Model.TaskName.Count() + ")", @disabled = "disabled" })
                                        </td>  
                                        }                         
                                        <td>
                                        <a>
                                            <button type="button" id="btnAdd" class="btn btn-default" onclick="Clear(@i)">
                                            Reset
                                            </button>                      
                                          </a>
                                        </td>
                                           
                                          <td>
                                          
                                        <a>                                             
                                            <button type="button" class="btn btn-info btn-sm btn-block btn-icon icon-left"  onclick='AddNewMeeting(@i,@Model.TaskName.Count())'>
                                            <i class="entypo-pencil"></i>Approve
                                            </button>
                                        </a>
                                    </td>     
                                       <td>
                                          
                                        <a>                                             
                                            <button type="button" class="btn btn-info btn-sm btn-block btn-icon icon-left"  onclick='Reject(@i,@Model.TaskName.Count())'>
                                            <i class="entypo-pencil"></i>Reject
                                            </button>
                                        </a>
                                    </td>               
                                </tr>
                       

                                   }
                                   
                                   
                                
                            }
                             
                        </table>
                        <span id="training" style="color: Red"></span>   
                        <span id="training1" style="color: Red"></span>     
                       
                    
                      
                    }

                      <form class="text-right" method="get" action="/TSR/ApprovedTimeSheet">
                        <div class="btn-group" style="float: right; padding-right: 10px !important">
                            <button type="submit" class="btn btn-default">
                                <i></i>Back</button>
                        </div>
                        </form>
                   
                    <br />


                   

   <button class="btn btn-blue" style="font-weight: bold" type="button" onclick='AddTask(@Model.Count)'>
                        Add New Task
                    </button>

                    <div class="btn-group" style="float:left" id="AddNewProject">
                     
                    
                    </div>

                 
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade in" id="portlet-config" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="tools">
                <div id="PartialSection">
                </div>
            </div>
        </div>
    </div>


     <script src="../../Content/Template/js/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="../../Content/Template/js/dataTables.bootstrap.js" type="text/javascript"></script>
    <script src="../../Content/Template/js/select2/select2.min.js" type="text/javascript"></script>
    <script src="../../Content/bootstrap/bootbox.min.js" type="text/javascript"></script>
    <script src="../../Content/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="../../Content/bootstrap/js/bootstrap.js" type="text/javascript"></script>
    <script src="../../Content/Template/js/toastr.js" type="text/javascript"></script>
     <script src="../../Content/JS/ToasterAlert.js" type="text/javascript"></script>
 



  <script type="text/javascript">

      var Submitform = true;
      var k;


    
      function AddTask(k) {

          var UserId = $("#Textbox13" + k).val();

          

          $.ajax({
              url: "../../TSR/ApprovedAddTask/"+UserId,
              type: 'GET', cache: false,
              success: function (result) {
                  $('#PartialSection').html(result);
                  $('#portlet-config').appendTo("body").modal({ backdrop: 'static', keyboard: false });

              }

          });

      }

      $(document).ready(function () {
          var rowCount = $('#tblMeeting').length;
          for (i = 0; i < 5; i++) {
           
              $("#Textbox1" + i).on('paste keypress', (function (e) {
                  var key;
                  if (e.which) {
                      key = String.fromCharCode(e.which);
                  } else {
                      key = e.originalEvent.clipboardData.getData('Text');
                  }
                  var value = $(this).val() + key;
                  if (!/^[0-9]{1,999}$/.test(value)) {
                      e.preventDefault();
                  }
              }));
          }


          for (i = 0; i < 5; i++) {
            
              $("#Textbox2" + i).on('paste keypress', (function (e) {
                  var key;
                  if (e.which) {
                      key = String.fromCharCode(e.which);
                  } else {
                      key = e.originalEvent.clipboardData.getData('Text');
                  }
                  var value = $(this).val() + key;
                  if (!/^[0-9]{1,999}$/.test(value)) {
                      e.preventDefault();
                  }
              }));
          }


          for (i = 0; i < 5; i++) {

              $("#Textbox3" + i).on('paste keypress', (function (e) {
                  var key;
                  if (e.which) {
                      key = String.fromCharCode(e.which);
                  } else {
                      key = e.originalEvent.clipboardData.getData('Text');
                  }
                  var value = $(this).val() + key;
                  if (!/^[0-9]{1,999}$/.test(value)) {
                      e.preventDefault();
                  }
              }));
          }



          for (i = 0; i < 5; i++) {

              $("#Textbox4" + i).on('paste keypress', (function (e) {
                  var key;
                  if (e.which) {
                      key = String.fromCharCode(e.which);
                  } else {
                      key = e.originalEvent.clipboardData.getData('Text');
                  }
                  var value = $(this).val() + key;
                  if (!/^[0-9]{1,999}$/.test(value)) {
                      e.preventDefault();
                  }
              }));
          }




          for (i = 0; i < 5; i++) {

              $("#Textbox5" + i).on('paste keypress', (function (e) {
                  var key;
                  if (e.which) {
                      key = String.fromCharCode(e.which);
                  } else {
                      key = e.originalEvent.clipboardData.getData('Text');
                  }
                  var value = $(this).val() + key;
                  if (!/^[0-9]{1,999}$/.test(value)) {
                      e.preventDefault();
                  }
              }));
          }


      });


      function Test1(k, t) {


          var total = $("#Weekhours").val();
          var u = 0;
          var v;
          var count = 0;

          var rowCount = $('#tblMeeting tr').length - 1;

          for (v = 0; v < t; v++) {

              u += parseInt($("#Textbox1" + v).val());
              if (u > 9) {
                  count = 1;

              }
          }

          var value1 = $("#Textbox1" + k).val();
          var value2 = $("#Textbox2" + k).val();
          var value3 = $("#Textbox3" + k).val();
          var value4 = $("#Textbox4" + k).val();
          var value5 = $("#Textbox5" + k).val();
          var value6 = $("#Textbox6" + k).val();
          var value7 = $("#Textbox7" + k).val();
          $.ajax({
              url: "../../TSR/ApprovedTotal",
              type: "GET",
              cache: false,
              data: { t1: value1, t2: value2, t3: value3, t4: value4, t5: value5, t6: value6, t7: value7, total: count },
              success: function (result) {

                  $("#Textbox8" + k).val(result.Name);

                  var sum = parseInt(result.Name);

                  for (v = 0; v < t; v++) {
                      if (v != k) {
                          if ($("#Textbox8" + v).val() != null)
                              sum += parseInt($("#Textbox8" + v).val()) || 0;
                      }
                  }
                  $("#Weekhours").val(sum);

                  if (result.Result == "Extra") {

                      // $('#training').html('Number of efforts Should Not Greater Than 9 Hours');
                       //Submitform = false;
                  }
                  else if (result.Result == "Extrahours") {
                      // $('#training').html('Maximum 9 hours per day');
                      // Submitform = false;
                  }
                  else {
                      $('#training').html('');
                      Submitform = true;
                  }
              }
          });
      }






      $("#Textbox2").keypress(function (e) {

          if (String.fromCharCode(e.keyCode).match(/[^0-9]/g)) return false;
      });



      function Test2(k, t) {

          var total = $("#Weekhours").val();


          var u = 0;
          var v;
          var count = 0;

          var rowCount = $('#tblMeeting tr').length - 1;

          for (v = 0; v < t; v++) {
              u += parseInt($("#Textbox2" + v).val());
              if (u > 9) {

                  count = 1;

              }
          }

          var value1 = $("#Textbox1" + k).val();
          var value2 = $("#Textbox2" + k).val();
          var value3 = $("#Textbox3" + k).val();
          var value4 = $("#Textbox4" + k).val();
          var value5 = $("#Textbox5" + k).val();
          var value6 = $("#Textbox6" + k).val();
          var value7 = $("#Textbox7" + k).val();



          $.ajax({
              url: "../../TSR/ApprovedTotal",
              type: "GET",
              cache: false,
              data: { t1: value1, t2: value2, t3: value3, t4: value4, t5: value5, t6: value6, t7: value7, total: count, weekhours: total },
              success: function (result) {

                  $("#Textbox8" + k).val(result.Name);
                  var sum = parseInt(result.Name);

                  for (v = 0; v < t; v++) {
                      if (v != k) {
                          if ($("#Textbox8" + v).val() != null)
                              sum += parseInt($("#Textbox8" + v).val()) || 0;
                      }
                  }
                  $("#Weekhours").val(sum);

                  if (result.Result == "Extra") {
                      //  $('#training').html('Number of efforts Should Not Greater Than 9 Hours');
                       //Submitform = false;
                  }
                  else if (result.Result == "Extrahours") {
                      // $('#training').html('Maximum 9 hours per day');
                     //  Submitform = false;
                  }
                  else {
                      $('#training').html('');
                      Submitform = true;
                  }
              }
          });


      }




      $("#Textbox3").keypress(function (e) {

          if (String.fromCharCode(e.keyCode).match(/[^0-9]/g)) return false;
      });



      function Test3(k, t) {

          var total = $("#Weekhours").val();


          var u = 0;
          var v;
          var count = 0;

          var rowCount = $('#tblMeeting tr').length - 1;

          for (v = 0; v < t; v++) {
              u += parseInt($("#Textbox3" + v).val());
              if (u > 9) {

                  count = 1;

              }
          }



          var value1 = $("#Textbox1" + k).val();
          var value2 = $("#Textbox2" + k).val();
          var value3 = $("#Textbox3" + k).val();
          var value4 = $("#Textbox4" + k).val();
          var value5 = $("#Textbox5" + k).val();
          var value6 = $("#Textbox6" + k).val();
          var value7 = $("#Textbox7" + k).val();

          $.ajax({
              url: "../../TSR/ApprovedTotal",
              type: "GET",
              cache: false,
              data: { t1: value1, t2: value2, t3: value3, t4: value4, t5: value5, t6: value6, t7: value7, total: count, weekhours: total },
              success: function (result) {

                  $("#Textbox8" + k).val(result.Name);
                  var sum = parseInt(result.Name);

                  for (v = 0; v < t; v++) {
                      if (v != k) {
                          if ($("#Textbox8" + v).val() != null)
                              sum += parseInt($("#Textbox8" + v).val()) || 0;
                      }
                  }
                  $("#Weekhours").val(sum);

                  if (result.Result == "Extra") {
                      // $('#training').html('Number of efforts Should Not Greater Than 9 Hours');
                     //  Submitform = false;
                  }
                  else if (result.Result == "Extrahours") {
                      // $('#training').html('Maximum 9 hours per day');
                     //  Submitform = false;
                  }
                  else {
                      $('#training').html('');
                      Submitform = true;
                  }
              }
          });

      }



      $("#Textbox4").keypress(function (e) {

          if (String.fromCharCode(e.keyCode).match(/[^0-9]/g)) return false;
      });




      function Test4(k, t) {


          var total = $("#Weekhours").val();



          var u = 0;
          var v;
          var count = 0;

          var rowCount = $('#tblMeeting tr').length - 1;

          for (v = 0; v < t; v++) {
              u += parseInt($("#Textbox4" + v).val());
              if (u > 9) {
                  count = 1;
              }
          }




          var value1 = $("#Textbox1" + k).val();
          var value2 = $("#Textbox2" + k).val();
          var value3 = $("#Textbox3" + k).val();
          var value4 = $("#Textbox4" + k).val();
          var value5 = $("#Textbox5" + k).val();
          var value6 = $("#Textbox6" + k).val();
          var value7 = $("#Textbox7" + k).val();



          $.ajax({
              url: "../../TSR/ApprovedTotal",
              type: "GET",
              cache: false,
              data: { t1: value1, t2: value2, t3: value3, t4: value4, t5: value5, t6: value6, t7: value7, total: count, weekhours: total },
              success: function (result) {

                  $("#Textbox8" + k).val(result.Name);

                  var sum = parseInt(result.Name);

                  for (v = 0; v < t; v++) {
                      if (v != k) {
                          if ($("#Textbox8" + v).val() != null)
                              sum += parseInt($("#Textbox8" + v).val()) || 0;
                      }
                  }
                  $("#Weekhours").val(sum);

                  if (result.Result == "Extra") {
                      //   $('#training').html('Number of efforts Should Not Greater Than 9 Hours');
                       // Submitform = false;
                  }
                  else if (result.Result == "Extrahours") {
                      //$('#training').html('Maximum 9 hours per day');
                       Submitform = false;
                  }
                  else {
                      $('#training').html('');
                      //Submitform = true;
                      return;
                  }
              }
          });

      }



      $("#Textbox5").keypress(function (e) {

          if (String.fromCharCode(e.keyCode).match(/[^0-9]/g)) return false;
      });



      function Test5(k, t) {

          var total = $("#Weekhours").val();



          var u = 0;
          var v;
          var count = 0;

          var rowCount = $('#tblMeeting tr').length - 1;

          for (v = 0; v < t; v++) {
              u += parseInt($("#Textbox5" + v).val());
              if (u > 9) {

                  count = 1;

              }
          }


          var value1 = $("#Textbox1" + k).val();
          var value2 = $("#Textbox2" + k).val();
          var value3 = $("#Textbox3" + k).val();
          var value4 = $("#Textbox4" + k).val();
          var value5 = $("#Textbox5" + k).val();
          var value6 = $("#Textbox6" + k).val();
          var value7 = $("#Textbox7" + k).val();



          $.ajax({
              url: "../../TSR/ApprovedTotal",
              type: "GET",
              cache: false,
              data: { t1: value1, t2: value2, t3: value3, t4: value4, t5: value5, t6: value6, t7: value7, total: count, weekhours: total },
              success: function (result) {

                  $("#Textbox8" + k).val(result.Name);
                  var sum = parseInt(result.Name);

                  for (v = 0; v < t; v++) {
                      if (v != k) {
                          if ($("#Textbox8" + v).val() != null)
                              sum += parseInt($("#Textbox8" + v).val()) || 0;
                      }
                  }
                  $("#Weekhours").val(sum);

                  if (result.Result == "Extra") {
                      // $('#training').html('Number of efforts Should Not Greater Than 9 Hours');
                     // Submitform = false;
                  }
                  else if (result.Result == "Extrahours") {
                      //  $('#training').html('Maximum 9 hours per day');
                      //Submitform = false;
                  }
                  else {
                      $('#training').html('');
                      Submitform = true;
                  }
              }
          });

      }



      $("#Textbox6").keypress(function (e) {

          if (String.fromCharCode(e.keyCode).match(/[^0-9]/g)) return false;
      });





      function Test6(k) {
          var total = $("#Weekhours").val();



          var rowCount = $('#tblMeeting tr').length - 1;


          var value1 = $("#Textbox1" + k).val();
          var value2 = $("#Textbox2" + k).val();
          var value3 = $("#Textbox3" + k).val();
          var value4 = $("#Textbox4" + k).val();
          var value5 = $("#Textbox5" + k).val();
          var value6 = $("#Textbox6" + k).val();
          var value7 = $("#Textbox7" + k).val();



          $.ajax({
              url: "../../TSR/ApprovedTotal",
              type: "GET",
              cache: false,
              data: { t1: value1, t2: value2, t3: value3, t4: value4, t5: value5, t6: value6, t7: value7 },
              success: function (result) {

                  $("#Textbox8" + k).val(result.Name);

                  var sum = parseInt(result.Name);

                  for (v = 0; v < t; v++) {
                      if (v != k) {
                          if ($("#Textbox8" + v).val() != null)
                              sum += parseInt($("#Textbox8" + v).val()) || 0;
                      }
                  }
                  $("#Weekhours").val(sum);
                  if (result.Result == "Extra") {
                      //  $('#training').html('Number of efforts Should Not Greater Than 9 Hours');
                      //  Submitform = false;
                  }
                  else {
                      $('#training').html('');
                      Submitform = true;
                  }
              }
          });
      }



      $("#Textbox7").keypress(function (e) {

          if (String.fromCharCode(e.keyCode).match(/[^0-9]/g)) return false;
      });




      function Test7(k) {


          var rowCount = $('#tblMeeting tr').length - 1;


          var value1 = $("#Textbox1" + k).val();
          var value2 = $("#Textbox2" + k).val();
          var value3 = $("#Textbox3" + k).val();
          var value4 = $("#Textbox4" + k).val();
          var value5 = $("#Textbox5" + k).val();
          var value6 = $("#Textbox6" + k).val();
          var value7 = $("#Textbox7" + k).val();



          $.ajax({
              url: "../../TSR/ApprovedTotal",
              type: "GET",
              cache: false,
              data: { t1: value1, t2: value2, t3: value3, t4: value4, t5: value5, t6: value6, t7: value7 },
              success: function (result) {
                  $("#Textbox8" + k).val(result.Name);

                  var sum = parseInt(result.Name);

                  for (v = 0; v < t; v++) {
                      if (v != k) {
                          if ($("#Textbox8" + v).val() != null)
                              sum += parseInt($("#Textbox8" + v).val()) || 0;
                      }
                  }
                  $("#Weekhours").val(sum);

                  if (result.Result == "Extra") {
                      //                      $('#training').html('Number of efforts Should Not Greater Than 9 Hours');
                      //                      Submitform = false;
                  }
                  else {
                      $('#training').html('');
                      Submitform = true;
                  }
              }
          });


      }



      //      
      //          function Test8(k, t) {

      //          
      //              var v;
      //              

      //              var rowCount = $('#tblMeeting tr').length - 1;

      //              for (v = 0; v < t; v++) 
      //              {
      //                  u = parseInt($("#Textbox8" + v).val());
      //                  $.ajax({
      //                      url: "../../TSR/weektotal",
      //                      type: "GET",
      //                      cache: false,
      //                      data: {Weeekhours:u },
      //                      success: function (result) {

      //                          $("#Weekhours").val(result.Name);
      //                         
      //                         
      //                      }
      //                  });
      //              }
      //          }


      function Reject(k, t) {

          var values = {

              "taskid": $("#Textbox11" + k).val(),
              "userid": $("#Textbox13" + k).val()

          }

          var taskid = $("#Textbox11" + k).val();
          var userid = $("#Textbox13" + k).val();


          $.ajax({
              url: "../../TSR/RejectedTotalHours/",
              type: 'GET', cache: false, data: values,
              success: function (result) {
                  $('#PartialSection').html(result);
                  $('#portlet-config').appendTo("body").modal({ backdrop: 'static', keyboard: false });

              }

          });

      }



      function AddNewMeeting(k, t) {
          //  alert(k);

          var w = 0;
          var y = 0;
          var a = 0;
          var b = 0;
          var c = 0;
          var d = 0;
          var e = 0;
          var f = 0;
          var g = 0;
          for (var i = 1; i <= t; i++) {
              w = $("#Textbox1" + i).val();
          }

//          for (var i = 0; i < t; i++) {

//              y += parseInt($("#Textbox1" + i).val()) || 0;
//              a += parseInt($("#Textbox2" + i).val()) || 0;
//              c += parseInt($("#Textbox3" + i).val()) || 0;
//              d += parseInt($("#Textbox4" + i).val()) || 0;
//              e += parseInt($("#Textbox5" + i).val()) || 0;
//              f += parseInt($("#Textbox6" + i).val()) || 0;
//              g += parseInt($("#Textbox7" + i).val()) || 0;
//              if (y > 9 || a > 9 || c > 9 || d > 9 || e > 9 || f > 9 || g > 9) {

//                  if (y > 9) {

//                      $('#training').html('Maximum 9 hours per day');
//                      Submitform = false;
//                      break;
//                  }
//                  else {
//                      $('#training').html('');
//                  }

//                  if (a > 9) {

//                      $('#training').html('Maximum 9 hours per day');
//                      Submitform = false;
//                      break;
//                  }
//                  else {
//                      $('#training').html('');
//                  }
//                  if (b > 9) {

//                      $('#training').html('Maximum 9 hours per day');
//                      Submitform = false;
//                      break;
//                  }
//                  else {
//                      $('#training').html('');
//                  }
//                  if (c > 9) {

//                      $('#training').html('Maximum 9 hours per day');
//                      Submitform = false;
//                      break;
//                  }
//                  else {
//                      $('#training').html('');
//                  }
//                  if (d > 9) {

//                      $('#training').html('Maximum 9 hours per day');
//                      Submitform = false;
//                      break;
//                  }
//                  else {
//                      $('#training').html('');
//                  }

//                  if (e > 9) {

//                      $('#training').html('Maximum 9 hours per day');
//                      Submitform = false;
//                      break;
//                  }
//                  else {
//                      $('#training').html('');
//                  }


//              }

//          }


         
          if (Submitform === true) {

              var values =
                           {
                               "userid": $("#Textbox13" + k).val(),
                               "Monday": $("#Textbox15" + k).val(),
                               "Tuesday": $("#Textbox16" + k).val(),
                               "Wednesday": $("#Textbox17" + k).val(),
                               "Thursday": $("#Textbox18" + k).val(),
                               "Friday": $("#Textbox19" + k).val(),
                               "taskid": $("#Textbox11" + k).val(),
                               "task": $("#Textbox10" + k).val(),
                               "text1": $("#Textbox1" + k).val(),
                               "text2": $("#Textbox2" + k).val(),
                               "text3": $("#Textbox3" + k).val(),
                               "text4": $("#Textbox4" + k).val(),
                               "text5": $("#Textbox5" + k).val(),
                               "text6": $("#Textbox6" + k).val(),
                               "text7": $("#Textbox7" + k).val(),
                               "text8": $("#Textbox8" + k).val()
                           }

              var opts =
                       {
                           "closeButton": true,
                           "debug": false,
                           "positionClass": "toast-top-right",
                           "toastClass": "White",
                           "onclick": null,
                           "showDuration": "300",
                           "hideDuration": "1000",
                           "timeOut": "2000",
                           "extendedTimeOut": "1000",
                           "showEasing": "swing",
                           "hideEasing": "linear",
                           "showMethod": "fadeIn",
                           "hideMethod": "fadeOut"
                       }

              $.ajax({
                  url: "../../TSR/ApprovedTotalHours/",
                  type: 'POST',
                  cache: false,
                  data: values,
                  traditional: true,
                  global: false,
                  success: function (result) {

                      if (result.Result === "Success") {

                          toastr.success("Working hours  approved successfully", opts);

                          $("#Textbox11" + k).attr("disabled", true);
                          $("#Textbox10" + k).attr("disabled", true);
                          $("#Textbox1" + k).attr("disabled", true);
                          $("#Textbox2" + k).attr("disabled", true);
                          $("#Textbox3" + k).attr("disabled", true);
                          $("#Textbox4" + k).attr("disabled", true);
                          $("#Textbox5" + k).attr("disabled", true);
                          $("#Textbox6" + k).attr("disabled", true);
                          $("#Textbox7" + k).attr("disabled", true);
                          $("#Textbox8" + k).attr("disabled", true);

                          // setTimeout(function () { location.reload(); }, 1000);

                      }
                      if (result.Result === "Already") {
                          toastr.success(" Working hours  approved   successfully", opts);
                            setTimeout(function () { location.reload(); }, 1000);

                      }

                  }

              });

          }

      }

      function Clear(k) {


          if ($('#Textbox1' + k).is(':disabled')) {

          }
          else {
              $('#Textbox1' + k).val('');
          }


          if ($('#Textbox2' + k).is(':disabled')) {

          }

          else {
              $('#Textbox2' + k).val('');
          }



          if ($('#Textbox3' + k).is(':disabled')) {

          }

          else {
              $('#Textbox3' + k).val('');
          }



          if ($('#Textbox4' + k).is(':disabled')) {

          }

          else {
              $('#Textbox4' + k).val('');
          }

          if ($('#Textbox5' + k).is(':disabled')) {

          }

          else {
              $('#Textbox5' + k).val('');
          }

          if ($('#Textbox6' + k).is(':disabled')) {

          }

          else {
              $('#Textbox6' + k).val('');
          }


          if ($('#Textbox7' + k).is(':disabled')) {

          }

          else {
              $('#Textbox7' + k).val('');
          }

          if ($('#Textbox8' + k).is(':disabled') && $("#Textbox7").prop('disabled', false) && $("#Textbox6").prop('disabled', false) && $("#Textbox5").prop('disabled', false) && $("#Textbox4").prop('disabled', false) && $("#Textbox3").prop('disabled', false) && $("#Textbox2").prop('disabled', false) && $("#Textbox1").prop('disabled', false)) {

              $('#Textbox8' + k).val('');
          }

          else {
              // alert("------");

          }



      }



      function Redirect() {
       
          window.location.href = '@Url.Action("ApprovedTimeSheet","TSR")'

      }



   


  </script>


</body>
</html>
